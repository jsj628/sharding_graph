import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

#epoch단위의 CST
shard8_CST = [1029318, 958466, 935511, 1054607, 992467, 959687, 751850, 865508, 1024742, 994328, 946494, 1046314, 1145961, 1048796, 984374, 1062717, 1014244, 925910, 975941, 862041, 764655, 761202, 763718, 914566, 782141, 810139, 691754, 843907, 899672, 941012, 834329, 813485, 731375, 726377, 643651, 590858, 658399, 726744, 789313, 730171, 798851, 701547, 866799]
shard16_CST = [1114218, 1031300, 1007803, 1128683, 1062382, 1023177, 799890, 922343, 1087279, 1049576, 1002595, 1112713, 1220191, 1113978, 1044924, 1125483, 1076037, 981524, 1035836, 917640, 812376, 814060, 816507, 976672, 837144, 874302, 742054, 906201, 970468, 1015601, 894732, 871196, 782057, 772193, 688596, 625572, 700540, 773186, 842670, 782005, 853971, 749190, 925869]
shard32_CST = [1151967, 1070253, 1036276, 1161582, 1097630, 1060774, 822869, 949221, 1126235, 1079870, 1030923, 1145645, 1263198, 1149653, 1079756, 1169380, 1110742, 1009921, 1065955, 954633, 836056, 835748, 839331, 1015929, 864061, 900119, 764166, 934988, 1001612, 1057847, 921528, 897808, 807193, 797626, 710522, 645301, 724925, 797533, 870554, 807098, 881813, 773923, 958137]
shard64_CST = [1166863, 1085280, 1048257, 1177514, 1112357, 1083830, 834431, 964493, 1141421, 1096838, 1043109, 1163162, 1282709, 1165931, 1094295, 1183762, 1127782, 1022806, 1080493, 968267, 848069, 847187, 852409, 1031331, 878024, 911695, 774560, 946947, 1017197, 1076448, 933789, 908815, 817812, 808007, 719579, 652900, 733969, 807800, 882488, 817062, 893244, 783654, 970185]

#epoch단위의 IST
shard8_IST = [158070, 144972, 133275, 140826, 138966, 141778, 95195, 114135, 135859, 119793, 112801, 136910, 158038, 136394, 126231, 138657, 130695, 111844, 120989, 120986, 97523, 98228, 102887, 140618, 112374, 115744, 94968, 117014, 134871, 151721, 115226, 109410, 98519, 94610, 88280, 72917, 88520, 93361, 107602, 100271, 108110, 98253, 122194, 0, 0, 0, 0, 0, 0, 0]
shard16_IST = [73170, 72138, 60983, 66750, 69051, 78288, 47155, 57300, 73322, 64545, 56700, 70511, 83808, 71212, 65681, 75891, 68902, 56230, 61094, 65387, 49802, 45370, 50098, 78512, 57371, 51581, 44668, 54720, 64075, 77132, 54823, 51699, 47837, 48794, 43335, 38203, 46379, 46919, 54245, 48437, 52990, 50610, 63124, 0, 0, 0, 0, 0, 0, 0]
shard32_IST = [35421, 33185, 32510, 33851, 33803, 40691, 24176, 30422, 34366, 34251, 28372, 37579, 40801, 35537, 30849, 31994, 34197, 27833, 30975, 28394, 26122, 23682, 27274, 39255, 30454, 25764, 22556, 25933, 32931, 34886, 28027, 25087, 22701, 23361, 21409, 18474, 21994, 22572, 26361, 23344, 25148, 25877, 30856, 0, 0, 0, 0, 0, 0, 0]
shard64_IST = [20525, 18158, 20529, 17919, 19076, 17635, 12614, 15150, 19180, 17283, 16186, 20062, 21290, 19259, 16310, 17612, 17157, 14948, 16437, 14760, 14109, 12243, 14196, 23853, 16491, 14188, 12162, 13974, 17346, 16285, 15766, 14080, 12082, 12980, 12352, 10875, 12950, 12305, 14427, 13380, 13717, 16146, 18808, 0, 0, 0, 0, 0, 0, 0]

#shardnum별 CST
shardnum = [i for i in range(8)]
shard8_shardnum = [5526632, 3817918, 5079533, 4627039, 4847649, 4553307, 3432545, 5479360]
shard16_shardnum = [3325451, 2474851, 2211150, 1911780, 2554886, 2763060, 2337899, 2562347, 2797118, 2352504, 2832125, 1984492, 1980725, 2036516, 2924990, 2834882]
shard32_shardnum = [2084020, 1379611, 1444645, 1089461, 991761, 1270248, 895921, 1078502, 1120286, 1482179, 1599252, 1231480, 1015519, 1417037, 1361639, 1244581, 1412807, 1555518, 1063484, 1344658, 1579967, 1314204, 998263, 1029147, 924943, 1099198, 1351261, 883055, 884466, 2133575, 1266922, 1632733]
shard64_shardnum = [1359199, 746801, 640554, 750257, 768347, 707948, 487625, 614014, 415951, 582967, 738193, 548382, 438329, 467186, 489050, 628089, 546611, 583906, 509161, 985670, 997866, 624518, 697561, 550387, 453176, 570543, 786688, 650449, 715458, 667393, 601243, 661758, 727806, 700854, 805593, 770956, 494315, 581512, 901883, 457332, 496974, 1098497, 712288, 614630, 589827, 417753, 519880, 524645, 433484, 501038, 504149, 607353, 774930, 600263, 487663, 462373, 448740, 445734, 1474241, 682080, 546375, 736155, 815058, 837152]

fig = plt.figure(figsize=(10,10)) ## 캔버스 생성
fig.set_facecolor('white') ## 캔버스 색상 설정
ax = fig.add_subplot() ## 그림 뼈대(프레임) 생성
 
ax.spines['right'].set_visible(False) ## 오른쪽 축 숨김
ax.spines['top'].set_visible(False) ## 위쪽 축 숨김

args_plot = [shardnum, shard8_shardnum] ## 데이터 인자
config_plot = dict( ## 키워드 인자
    #color='#c02ad1', # 선 색깔
    linestyle='solid', # 선 스타일
    linewidth=2, # 선 두께 
    marker='o', # 마커 모양
    markersize=10, # 마커 사이즈
    markeredgecolor='white', # 마커 테두리 색깔
    markeredgewidth=3, # 마커 테두리 두께
)

shard8 = int(np.mean(shard8_shardnum))
line_plot = ax.plot(label='shard8', *args_plot,**config_plot) ## 선그래프 생성 - 범례라벨 추가
line_plot = line_plot[0]
 
ax.axhline(shard8,label='Mean', color = 'grey') ## 평균값을 y좌표로 하는 수평선 생성
ax.text(0,shard8+10,f'Mean of CST : {shard8}',fontsize=13) ## 평균 매출 텍스트 출력
'''
bbox = dict(
    boxstyle='square',
    facecolor='white',
)
 
for coord in list(line_plot.get_xydata()):
    ax.text(coord[0],coord[1]+10,f'{int(coord[1])}',fontsize=12, ha='center', bbox=bbox)
'''
ylim = ax.get_ylim() ## 기존의 y축 범위를 저장
 
yticks = list(ax.get_yticks()) ## y축 눈금을 가져온다.
 
for y in yticks:
    ax.axhline(y,linestyle=(0,(5,2)),color='grey',alpha=0.5) ## 눈금선 생성
 
## 평균값을 y 눈금에 추가한다.
yticks.append(shard8)
yticks = sorted(yticks)
 
ax.set_yticks(yticks) ## 평균이 포함된 y눈금으로 새롭게 세팅한다.
ax.set_ylim(ylim) ## 기존의 y축 범위를 유지
 
#ax.legend(loc='upper left', fontsize=15, shadow=True) ## 범례 생성 - 그림자 효과 추가
 
plt.yticks(fontsize=13) ## y축 눈금 크기 설정
plt.xticks(fontsize=12) ## x축 눈금 회전각도와 크기 설정
 
plt.ylabel('CST',rotation=90, fontsize=20, color='black') ## y축 라벨
#plt.xlabel('shardnum',fontsize=20, color='black') ## x축 라벨
plt.title('Shard 8',fontsize=20, color='black') ## 타이틀 설정
plt.show()